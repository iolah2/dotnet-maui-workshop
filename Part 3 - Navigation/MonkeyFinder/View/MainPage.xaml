<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MonkeyFinder.View.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:model="clr-namespace:MonkeyFinder.Model"
    xmlns:viewmodel="clr-namespace:MonkeyFinder.ViewModel"
    x:DataType="viewmodel:RakjegyzeksViewModel"
    Title="{Binding Title}">
    <StackLayout Margin="100,20,100,20">
        <VerticalStackLayout BackgroundColor="LightPink"
                                    VerticalOptions="Center"
                                    Grid.Column="1"
                                    Padding="10">
            <Label Style="{StaticResource LargeLabel}" TextColor="Green" BackgroundColor="White" HeightRequest="80">Rakjegy</Label>
            <Entry x:Name="aktJegy" Text="{Binding AktRakjegy}" HeightRequest="20"></Entry>
            <!--<ListView ItemsSource="{Binding Rakjegyzeks}">
                </ListView>-->
            <Button Text="Felrak"   HeightRequest="20" Command="{Binding PutItemToRaklapCommand}"></Button>
            <Button Text="FrissÃ­t"   HeightRequest="20" Command="{Binding LoadItemsCommand}"></Button>
        </VerticalStackLayout>
        <Grid MaximumHeightRequest="300"
        ColumnDefinitions="*,*"
        ColumnSpacing="5"
        RowDefinitions="400,Auto"
        RowSpacing="0">
            <CollectionView
            Grid.ColumnSpan="2"
            ItemsSource="{Binding Rakjegyzeks}"            
            SelectionMode="None">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="model:Rakjegyzek">
                        <Grid Padding="1">
                            <Frame HeightRequest="20" Style="{StaticResource CardView}">
                                <Grid Padding="0" ColumnDefinitions="*,2*">
                                    <!--<Image Aspect="AspectFill" Source="{Binding Image}"
                                       WidthRequest="125"
                                       HeightRequest="125"/>-->
                                    <Label WidthRequest="100" Padding="1" VerticalOptions="Center" Style="{StaticResource LargeLabel}" Text="{Binding Id}" />
                                    <HorizontalStackLayout
                                    VerticalOptions="Center"
                                    Grid.Column="1"
                                    Padding="1">
                                        <Label WidthRequest="200" Style="{StaticResource LargeLabel}" Text="{Binding Rakjegy}" />
                                        <!--<Entry Style="{StaticResource LargeEntry}" Text="{Binding Rakjegy}" />-->
                                        <!--<CheckBox IsChecked="{Binding Felrakva}" />-->
                                    </HorizontalStackLayout>
                                </Grid>
                            </Frame>
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!--<Button Text="Get Rakjegyzeks" 
                Command="{Binding GetRakjegyzeksCommand}"
                IsEnabled="{Binding IsNotBusy}"
                Grid.Row="1"
                Grid.Column="0"
                Style="{StaticResource ButtonOutline}"
                Margin="8"/>-->


            <ActivityIndicator IsVisible="{Binding IsBusy}"
                           IsRunning="{Binding IsBusy}"
                           HorizontalOptions="Fill"
                           VerticalOptions="Center"
                           Color="{StaticResource Primary}"
                           Grid.RowSpan="2"
                           Grid.ColumnSpan="2"/>
        </Grid>
    </StackLayout>
</ContentPage>
